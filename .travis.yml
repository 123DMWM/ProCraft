language: csharp
solution: ProCraft.sln
addons:
  ssh_known_hosts: 123DMWM.tk
  apt:
    packages:
    - sshpass
notifications:
  slack:
    on_success: change
script:
    - loc_=/home/travis/build/123DMWM/ProCraft/bin/Release/
    - ploc_=/home/travis/build/123DMWM/ProCraft/
    - zip_=${TRAVIS_COMMIT}.zip
    - xbuild /p:Configuration=Release ProCraft.sln
    - zip -j ${zip_} ${loc_}*.exe ${loc_}*.dll ${ploc_}LICENSE.txt ${ploc_}README.txt
after_success:
    - sshpass -p '${SFTP_PASSWORD}' scp ${zip_} ${SFTP_USER}@123DMWM.tk:${SFTP_LOC}
    - sshpass -p '${SFTP_PASSWORD}' scp ${zip_} ${SFTP_USER}@123DMWM.tk:${SFTP_LOC}/Latest.zip
    