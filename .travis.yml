language: csharp
solution: ProCraft.sln
addons:
  apt:
    packages:
    - sshpass
notifications:
  slack:
    on_success: change
script:
    - loc_=/home/travis/build/123DMWM/ProCraft/bin/Release/
    - ploc_=/home/travis/build/123DMWM/ProCraft/
    - zip_=${TRAVIS_COMMIT}.zip
    - xbuild /p:Configuration=Release ProCraft.sln
    - zip -j ${zip_} ${loc_}*.exe ${loc_}*.dll ${ploc_}LICENSE.txt ${ploc_}README.txt
after_success:
    - sudo sshpass -p '${SFTP_PASSWORD}' scp -o stricthostchecking=no ${zip_} ${SFTP_USER}@${SFTP_IP}:${SFTP_LOC}
    - sudo sshpass -p '${SFTP_PASSWORD}' scp -o stricthostchecking=no ${zip_} ${SFTP_USER}@${SFTP_IP}:${SFTP_LOC}/Latest.zip
    